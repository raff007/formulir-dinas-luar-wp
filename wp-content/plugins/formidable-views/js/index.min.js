var frmViewsDom={},frmViewsModal={},frmViewsUtil={},frmViewsTable={};
(function(){var __=wp.i18n.__;function tag(type,args){var has,setupAttrs,setupTagStyles,setupClasses,setupContent,setupOnClick,output=document.createElement(type);if("undefined"===typeof args)return output;has=makeHas(args);setupAttrs=function(){var callback=function(attr){if(has(attr))output.setAttribute(attr,args[attr])};each(getSupportedSetupAttrs(type),callback)};setupTagStyles=function(){var callback=function(style){if(has(style))output.style[style]=args[style]};each(getSupportedTagStyles(),
callback)};setupClasses=function(){if(has("class"))if("string"===typeof args.class)output.classList.add(args.class);else each(args.class,function(currentClass){output.classList.add(currentClass)})};setupContent=function(){var clone;if(has("text"))output.textContent=args.text;else if(has("children"))each(args.children,function(child){output.appendChild(child)});else if(has("child"))output.appendChild(args.child);else if(has("icon")){clone=document.getElementById(args.icon);if(clone!==null){clone=clone.cloneNode(true);
clone.id="";output.appendChild(clone)}if(has("backgroundColor")){output.style.backgroundColor=args.backgroundColor;output.style.color="#fff"}}else if(has("html"))output.innerHTML=args.html};setupOnClick=function(){var callback,on,preventDefault=false;if(has("onclick"))callback=args.onclick;else{if(!has("onclickPreventDefault"))return;preventDefault=true;callback=args.onclickPreventDefault}if(!has("id")){console.warn("formidable-views: please provide an id when setting an onclick");return}if(preventDefault)on=
function(event){event.preventDefault();callback(event)};else on=callback;jQuery(document).off("click","#"+args.id);jQuery(document).on("click","#"+args.id,on)};setupAttrs();setupTagStyles();setupClasses();setupContent();setupOnClick();return output}function getSupportedSetupAttrs(type){var attrs=["id","role","tabindex"];if("label"===type)attrs.push("for");if("form"===type)attrs.push("method");return attrs}function getSupportedTagStyles(){return["padding","margin","border","fontSize","color","opacity",
"position","textAlign","display","height","overflow"]}function div(args){return tag("div",args)}function p(args){return tag("p",args)}function span(args){return tag("span",args)}function emptyNode(){return document.createTextNode("")}function a(args){var output=tag("a",args);if("undefined"===typeof args.href)args.href="#";if("undefined"!==typeof args.target)output.target=args.target;output.setAttribute("href",args.href);return output}function button(args){if("undefined"===typeof args.class)args.class=
[];else if(!Array.isArray(args.class))args.class=[args.class];args.class.push("button");if(-1!==args.class.indexOf("frm-button-secondary"))args.class.push("button-secondary");else if(-1===args.class.indexOf("frm-views-modal-cancel-button"))args.class.push("button-primary","frm-button-primary");else args.class.push("frm-button-secondary");return a(args)}function select(options,args){var output=tag("select",{children:options}),has=makeHas(args);if(has("id")){output.id=args.id;if(has("onchange")){output.id=
args.id;jQuery(document).off("change","#"+args.id);jQuery(document).on("change","#"+args.id,args.onchange)}}return output}function option(value,textContent,isSelected){var output=document.createElement("option");output.setAttribute("value",value);output.textContent=textContent;if(isSelected)output.setAttribute("selected","selected");return output}function pullOptionsFrom(templateId,selectedValue){var optionElements,optionIndex,currentOption,currentOptionValue,isSelected,template=document.getElementById(templateId),
options=[];if(null===template)return options;if("number"===typeof selectedValue)selectedValue=selectedValue.toString();optionElements=template.querySelectorAll("option");for(optionIndex=0;optionIndex<optionElements.length;++optionIndex){currentOption=optionElements[optionIndex];currentOptionValue=currentOption.getAttribute("value");if(""!==currentOptionValue){isSelected=currentOptionValue===selectedValue;options.push(option(currentOptionValue,currentOption.textContent,isSelected))}}return options}
function radios(options,name){var keys=Object.keys(options);return span({children:map(keys,function(key){return input({id:"radio_"+name+"_"+key,name:name,type:"radio",label:options[key],value:key})}),class:"frm-dom-radios"})}function input(args){var label,setInputAttribute,classes=["frm_form_field"],has=makeHas(args),output=tag("input",args);if(!has("type"))args.type="text";setInputAttribute=function(attr){if(has(attr))output[attr]=args[attr]};each(getSupportedInputAttrs(),setInputAttribute);if(has("label")){label=
tag("label",{text:args.label});if(has("id"))label.setAttribute("for",args.id);if(args.containerClass)classes.push(args.containerClass);output=div({class:classes,children:[label,output]})}if(has("onchange"))if(has("id"))jQuery(document).on("change","#"+args.id,args.onchange);else console.warn("formidable-views: please provide an id when setting an onchange");return output}function getSupportedInputAttrs(){return["value","placeholder","type","name"]}function tabs(items,args){var passArgs,addTab,outputArgs,
has=makeHas(args),state={},children=[];if(has("active"))state.activeTab=args.active;else if("undefined"!==items[0].pageKey)state.activeTab=items[0].pageKey;else state.activeTab=items[0].text;passArgs=function(tabArgs,key,mapKey){if(!has(key))return;if("undefined"!==typeof mapKey)tabArgs[mapKey]=args[key];else tabArgs[key]=args[key]};addTab=function(tabArgs,index){var newTab;passArgs(tabArgs,"tabClass","class");passArgs(tabArgs,"pageWrapper");passArgs(tabArgs,"stateHandler");newTab=tab(tabArgs,index,
state);if(newTab.classList.contains("frm-active-tab"))state.activeTabElement=newTab;children.push(newTab)};each(items,addTab);outputArgs={children:children};if(has("wrapperClass"))outputArgs.class=args.wrapperClass;return div(outputArgs)}function tab(tabArgs,index,state){var element,onclick,isActive,setPage,has=makeHas(tabArgs);if(!has("pageKey"))tabArgs.pageKey=tabArgs.text;isActive=function(index){return tabArgs.pageKey===state.activeTab};setPage=function(){if(has("page")&&has("pageWrapper")){if(has("stateHandler")&&
has("pageKey"))tabArgs.stateHandler(tabArgs.pageKey);redraw(tabArgs.pageWrapper,tabArgs.page())}};if(!Array.isArray(tabArgs.class))tabArgs.class=[tabArgs.class];if(isActive(index))tabArgs.class.push("frm-active-tab");if("undefined"!==typeof tabArgs.onclick)onclick=tabArgs.onclick;else onclick=function(){};tabArgs.onclick=function(){state.activeTabElement.classList.remove("frm-active-tab");element.classList.add("frm-active-tab");state.activeTabElement=element;setPage();onclick()};element=div(tabArgs);
if(isActive())setPage();return element}function collapsible(header,child,args){var content,section,classes=["accordion-section"],has=makeHas(args),open=has("open")&&args.open;header=tag("h3",{text:header}),header.classList.add("accordion-section-title");header.onclick=function(){open=!open;content.setAttribute("aria-expanded",open);jQuery(section).toggleClass("open",open);if(section.classList.contains("open"))tryToFocusOnFirstAvailableField(section)};content=div({child:child,class:"accordion-section-content"});
content.setAttribute("aria-expanded",open);if(open)classes.push("open");section=div({children:[header,content],class:classes});return section}function tryToFocusOnFirstAvailableField(section){var field=section.querySelector("input");if(null===field)field=section.querySelector("textarea");if(null!==field)field.focus()}function redraw(element,child){element.innerHTML="";element.appendChild(child)}function maybeCreateModal(args){var metaboxHolder,postbox,top,title,modal,top,content,footer,modalHelper,
has=makeHas(args);if("undefined"===typeof args)args={};if(has("id"))modal=document.getElementById(args.id);if(null===modal||"undefined"===typeof modal){modal=div({class:["frm-modal","frm_wrap"]});if(has("tabindex"))modal.tabIndex=args.tabindex;if(has("id"))modal.id=args.id;postbox=div({class:"postbox"});metaboxHolder=div({class:"metabox-holder",child:postbox});modal.appendChild(metaboxHolder);document.body.appendChild(modal)}postbox=modal.querySelector(".postbox");modalHelper=getModalHelper(modal,
postbox);if(has("title")){title=modal.querySelector(".frm-modal-title");if(null===title){title=div({child:document.createTextNode(args.title),class:"frm-modal-title"});top=modal.querySelector(".frm_modal_top");if(null===top){top=div({class:"frm_modal_top",children:[title,div({child:a({text:__("Cancel","formidable-views"),class:"dismiss"})})]});postbox.appendChild(top)}}else title.innerHTML=div({child:document.createTextNode(args.title)}).innerHTML}if(has("content"))modalHelper(args.content,"frm_modal_content");
if(has("footer"))modalHelper(args.footer,"frm_modal_footer");makeModalIntoADialogAndOpen(modal);return modal}function getModalHelper(modal,appendTo){return function(child,uniqueClassName){var element=modal.querySelector("."+uniqueClassName);if(null===element){element=div({child:child,class:uniqueClassName});appendTo.appendChild(element)}else redraw(element,child)}}function makeModalIntoADialogAndOpen(modal){var $modal=jQuery(modal);if(!$modal.hasClass("frm-dialog"))$modal.dialog({dialogClass:"frm-dialog",
modal:true,autoOpen:false,closeOnEscape:true,width:"550px",resizable:false,draggable:false,open:function(){jQuery(".ui-dialog-titlebar").addClass("frm_hidden").removeClass("ui-helper-clearfix");jQuery("#wpwrap").addClass("frm_overlay");jQuery(".frm-dialog").removeClass("ui-widget ui-widget-content ui-corner-all");$modal.removeClass("ui-dialog-content ui-widget-content");jQuery(".ui-widget-overlay, a.dismiss").on("click",function(event){event.preventDefault();$modal.dialog("close")})},close:function(){jQuery("#wpwrap").removeClass("frm_overlay");
jQuery(".spinner").css("visibility","hidden")}});scrollToTop();$modal.dialog("open");return $modal}function scrollToTop(){if("scrollRestoration"in history)history.scrollRestoration="manual";window.scrollTo(0,0)}function recenterModal(modalId){jQuery(document.getElementById(modalId)).dialog("option","position",{my:"center",at:"center",of:window})}function each(items,callback){var index,length=items.length;for(index=0;index<length;index++)callback(items[index],index)}function map(items,callback){var output=
[];each(items,function(item,index){output.push(callback(item,index))});return output}function makeHas(args){if("undefined"===typeof args)return function(){return false};return function(key){return"undefined"!==typeof args[key]}}function post(data,success,error){var handleSuccessCallback=function(responseData){if("function"===typeof success)success(responseData)};jQuery.ajax({type:"POST",url:ajaxurl,data:data,success:function(response){if("undefined"!==typeof response.success&&response.success){if("undefined"===
typeof response.data){handleSuccessCallback({});return}handleSuccessCallback(response.data);if("undefined"!==typeof response.data.redirect)window.location=response.data.redirect}else if("function"===typeof error)error(response)},error:error})}function success(content){if("object"===typeof frmDom&&"function"===typeof frmDom.success){frmDom.success(content);return}const container=document.getElementById("wpbody");const notice=div({class:["notice","notice-info","frm-review-notice","frm_updated_message"],
child:div({class:"frm-satisfied",child:content})});notice.style.borderRadius="4px";notice.style.right="10px";notice.style.bottom="10px";container.appendChild(notice);setTimeout(function(){jQuery(notice).fadeOut(function(){notice.remove()})},2E3)}function getTableSelectAllAndSearchOptions(){return div({class:["frm_grid_container","frm-mb-sm"],children:[div({class:"frm_fourth",padding:"4px 0 0 ",child:a({id:"frm_table_columns_select_all",onclickPreventDefault:function(){toggleAllColumnOptions(true)},
text:__("Select all","formidable-views")})}),div({class:"frm_fourth",padding:"4px 0 0 ",child:a({id:"frm_table_columns_deselect_all",onclickPreventDefault:function(){toggleAllColumnOptions(false)},text:__("Deselect all","formidable-views")})}),div({class:"frm_half",child:getTableColumnOptionSearch()})]})}function toggleAllColumnOptions(checked){each(document.querySelectorAll(".frm-new-table-view-option input"),function(option){option.checked=checked})}function getTableColumnOptionSearch(){var search=
input({class:["frm-search-input","frm-auto-search"]});search.setAttribute("type","search");search.setAttribute("name","s");search.setAttribute("placeholder",__("Search for a form field","formidable-views")),search.setAttribute("data-tosearch","frm-new-table-view-option");return tag("p",{class:"frm-search",children:[span({class:["frmfont","frm_search_icon"]}),search]})}function getTableOptionHtmlFromData(options){return div({class:["frm_grid_container","frm-table-options-container"],children:map(options,
function(optionInfo){const label=tag("label",{children:[getTableOptionCheckbox(optionInfo.value,optionInfo.checked),document.createTextNode(optionInfo.label)]});let checkboxClasses=["frm_half","frm-new-table-view-option"];if(optionInfo.checked)checkboxClasses.push("frm-selected-table-view-option");return tag("p",{class:checkboxClasses,children:[label]})})})}function getTableOptionCheckbox(value,checked){const checkbox=tag("input");checkbox.setAttribute("type","checkbox");checkbox.value=value;checkbox.checked=
checked;return checkbox}frmViewsDom.tag=tag;frmViewsDom.div=div;frmViewsDom.p=p;frmViewsDom.span=span;frmViewsDom.emptyNode=emptyNode;frmViewsDom.a=a;frmViewsDom.button=button;frmViewsDom.select=select;frmViewsDom.option=option;frmViewsDom.pullOptionsFrom=pullOptionsFrom;frmViewsDom.radios=radios;frmViewsDom.input=input;frmViewsDom.tabs=tabs;frmViewsDom.collapsible=collapsible;frmViewsDom.redraw=redraw;frmViewsDom.success=success;frmViewsModal.maybeCreateModal=maybeCreateModal;frmViewsModal.recenterModal=
recenterModal;frmViewsUtil.each=each;frmViewsUtil.map=map;frmViewsUtil.makeHas=makeHas;frmViewsUtil.post=post;frmViewsTable.getTableSelectAllAndSearchOptions=getTableSelectAllAndSearchOptions;frmViewsTable.getTableOptionHtmlFromData=getTableOptionHtmlFromData})();(function(){if("undefined"===typeof wp)return;let tag,div,span,a,input,emptyNode,button,select,option,pullOptionsFrom,maybeCreateModal,post,each,getTableOptionHtmlFromData,getTableSelectAllAndSearchOptions;let registeredModalListeners=false;const __=wp.i18n.__;const state={viewName:"",applicationId:0};const canAddApplications="1"===frmViewsIndexVars.canAddApplications;function addFrmWrapClass(){const head=document.querySelector(".wp-heading-inline");if(head)head.parentElement.classList.add("frm_wrap")}
function triggerSelectViewType(){return maybeCreateModal({id:"frm_new_view_modal",tabindex:"0",title:__("Select View type","formidable-views"),content:selectViewTypeContent(),footer:selectViewTypeFooter()})}function triggerStepTwo(type){state.viewName="undefined"!==typeof frmSelectedFormName?frmSelectedFormName+" "+getTypeSuffix(type):"";maybeCreateModal({id:"frm_new_view_modal",title:getStepTwoTitle(),content:selectDataSourceContent(type),footer:selectDataSourceFooter(type)});const newViewNameEl=
document.getElementById("frm_new_view_name");newViewNameEl.focus();newViewNameEl.addEventListener("input",updateViewName)}function updateViewName(){state.viewName=this.value}function triggerStepTwoSubmitOnEnterKey(e){if("Enter"!==e.key||"frm_application_autocomplete_input"===e.target.id)return;e.preventDefault();document.getElementById("frm_select_data_source_create").click()}function getStepTwoTitle(){return getFormIdFromUrl()?__("Create new view","formidable-views"):__("Select Data Source","formidable-views")}
function triggerCreateView(formId,type){const data={action:"frm_views_editor_create",form:formId,type:type,nonce:frmGlobal.nonce,name:getViewName(),application_id:state.applicationId};if("table"===type)data.tableOptions=getSelectedTableOptionFieldValues();post(data)}function getViewName(){return state.viewName}function getSelectedTableOptionFieldValues(){const fieldValues=[];each(document.querySelectorAll(".frm-new-table-view-option input"),function(input){if(input.checked)fieldValues.push(input.value)});
return fieldValues}function getFormIdValueFromDatasourceSelect(){return document.getElementById("frm_new_view_datasource_select").value}function onClickPreventDefault(id,callback){jQuery("#"+id).click(function(event){event.preventDefault();callback()})}function onNewViewClick(){const modal=triggerSelectViewType();modal.focus();if(registeredModalListeners)return;registeredModalListeners=true;jQuery(document).on("click","#frm_new_view_modal li .frm-hover-icons .frm-create-view",function(event){const type=
jQuery(this).closest("[frm-view-type]").attr("frm-view-type");if("application"===type)return;event.preventDefault();triggerStepTwo(type)});jQuery(document).on("click",'#frm_new_view_modal li [role="button"]:not(a)',handleNewViewTypeContainerClick);jQuery(document).on("keydown","#frm_new_view_modal li.frm-selectable",handleNewViewTypeContainerKeyDown)}function handleNewViewTypeContainerKeyDown(e){if(e.key===undefined||![" ","Enter"].includes(e.key))return;e.preventDefault();triggerClickOnNewViewTypeLi(e.target)}
function handleNewViewTypeContainerClick(){triggerClickOnNewViewTypeLi(this.closest("li"))}function triggerClickOnNewViewTypeLi(li){let hoverIcons=li.querySelector(".frm-hover-icons");if(!hoverIcons){handleSelectableMouseOver.bind(li)();hoverIcons=li.querySelector(".frm-hover-icons");hoverIcons.style.display="none"}const trigger=hoverIcons.querySelector(".frm-create-view");trigger.click()}function selectViewTypeContent(){const list=tag("ul",{class:["frm-templates-list","frm-categories-list","frm_grid_container",
"frm-mb-0"],children:[getGridOption(),getCalendarViewOption(),getTableOption(),getClassicViewOption()]});if("string"===typeof frmGlobal.applicationsUrl&&frmGlobal.canAccessApplicationDashboard)list.appendChild(getReadyMadeSolutionOption());const wrapper=div({class:["cta-inside"],child:list});return div({class:"inside",child:wrapper})}function getGridOption(){return viewTypeListItem("grid","frm_view_icon_grid","#805EF6",__("Grid","formidable-views"),__("Create a view and write less code","formidable-views"))}
function getCalendarViewOption(){return viewTypeListItem("calendar","frm_views_calendar_type","var(--primary-color)",__("Calendar","formidable-views"),__("Insert entries into a calendar","formidable-views"))}function getTableOption(){return viewTypeListItem("table","frm_views_table_type","#68DADC",__("Table","formidable-views"),__("Insert entries into a table","formidable-views"))}function getClassicViewOption(){return viewTypeListItem("all","frm_views_editor_classic_view_icon","#F4AD3D",__("Classic",
"formidable-views"),__("Create a new view from scratch","formidable-views"))}function getReadyMadeSolutionOption(){const item=viewTypeListItem("application","frm_views_editor_ready_made_solution_icon","var(--primary-color)",__("Ready Made Solutions","formidable-views"),__("Start from an application template","formidable-views"));handleSelectableMouseOver.bind(item)();handleSelectableMouseOut.bind(item)();const newViewTrigger=item.querySelector(".frm-create-view");newViewTrigger.setAttribute("href",
frmGlobal.applicationsUrl);return item}function selectViewTypeFooter(){return div({class:"frmcenter",children:[createScreenReaderBreak(),document.createTextNode(getCurrentStepDescription(1))]})}function getCurrentStepDescription(currentStep,type){const numberOfSteps=getTotalNumberOfSteps(type);if(1===numberOfSteps)return"";return __("%1$s of %2$s","formidable_views").replace("%1$s",currentStep).replace("%2$s",numberOfSteps)}function typeIncludesThreeSteps(type){return"table"===type}function getTotalNumberOfSteps(type){const numberOfSteps=
typeIncludesThreeSteps(type)?3:2;return numberOfSteps}function getFormIdFromUrl(){return getUrlParam("form")}function getUrlParam(key){const queryString=window.location.search;const urlParams=new URLSearchParams(queryString);return urlParams.get(key)}function selectDataSourceContent(type){const selectedDataSourceContent=div({class:["frm_wrap","field-group"],children:[maybeGetComingSoon(type),getViewNameInputWrapper(),getFormSelectLabel(),getFormSelect()],padding:"30px"});selectedDataSourceContent.addEventListener("keydown",
triggerStepTwoSubmitOnEnterKey);const applicationDropdown=maybeGetApplicationDropdown();if(applicationDropdown)selectedDataSourceContent.appendChild(applicationDropdown);return selectedDataSourceContent}function getFormSelectLabel(){if(getFormIdFromUrl())return emptyNode();const label=tag("label",{text:__("Use Entries from Form","formidable-views"),fontSize:"14px"});label.setAttribute("for","frm_new_view_datasource_select");return div({child:label,margin:"15px 0 8px 0"})}function getViewNameInputWrapper(){const inputId=
"frm_new_view_name";const nameLabel=tag("label",{text:__("View Name","formidable-views"),fontSize:"14px"});nameLabel.setAttribute("for",inputId);return div({children:[div({child:nameLabel}),div({child:input({id:inputId,value:state.viewName})})]})}function maybeGetApplicationDropdown(){if("undefined"===typeof frmDom)return false;if(!canAddApplications)return false;const dropdown=getApplicationAutocomplete();const label=tag("label",{text:__("Insert view into application","formidable-views")});label.setAttribute("for",
"frm_application_autocomplete_input");label.appendChild(createScreenReaderBreak());const wrapper=div({margin:"15px 0 0 0",children:[div({child:label,margin:"15px 0 0"}),dropdown]});frmDom.autocomplete.initAutocomplete("application",dropdown);setTimeout(()=>{const modal=document.getElementById("frm_new_view_modal");if(modal){modal.classList.add("frm_wrap");jQuery(dropdown.querySelector(".frm-application-search")).autocomplete("option","appendTo",modal)}},0);const hiddenInput=dropdown.querySelector(".frm_autocomplete_value_input");
state.applicationId=getUrlParam("applicationId");if(state.applicationId&&"undefined"!==typeof frmAutocompleteApplicationVars){dropdown.querySelector("#frm_application_autocomplete_input").value=frmAutocompleteApplicationVars.name;hiddenInput.value=state.applicationId}jQuery(dropdown).on("autocompletechange",()=>state.applicationId=hiddenInput.value);return wrapper}function getApplicationAutocomplete(){return span({children:[input({id:"frm_application_autocomplete_input",class:"frm-application-search",
type:"text",placeholder:__("Select application","formidable-pro")}),input({class:"frm_autocomplete_value_input",type:"hidden",name:"application_id"})]})}function maybeGetComingSoon(type){if(-1===["calendar"].indexOf(type))return emptyNode();return comingSoon(type)}function comingSoon(type){let icon,title;title=__("The new %1$s is coming soon.","formidable-views");switch(type){case "calendar":icon="frm_views_editor_coming_soon_calendar";title=title.replace("%1$s",__("Calendar Editor","formidable-views"));
break}return div({class:["frm-coming-soon","frm_grid_container"],children:[div({class:"frm2",icon:icon}),div({class:"frm10",children:[span({class:["frm-coming-soon-pill","frm-meta-tag"],text:__("COMING SOON","formidable-views")}),div({margin:"5px 0 0",children:[span({text:title}),document.createTextNode(" "),getFormidableSubscribeLink(),document.createTextNode(" "),span({text:__("to receive news about the latest updates.","formidable-views")})]})]})]})}function getFormidableSubscribeLink(){return a({text:__("Subscribe to Formidable Forms",
"formidable-views"),href:"https://formidableforms.com/newsletter/",target:"_blank"})}function getFormSelect(){if(getFormIdFromUrl())return emptyNode();return select([option("",__("Select datasource","formidable-views"))].concat(pullOptionsFrom("frm_data_source_form_select_template")),{id:"frm_new_view_datasource_select"})}function getTypeSuffix(type){if("all"===type||type.length<2)return"View";return type[0].toUpperCase()+type.substr(1)}function selectDataSourceFooter(type){const backButton=button({text:__("Back",
"formidable-views"),id:"frm_select_data_source_back",class:"frm-button-secondary",onclickPreventDefault:triggerSelectViewType});const pageCounter=span({class:"frm-modal-pagecounter",child:document.createTextNode(getCurrentStepDescription(2,type))});const createButton=button({text:__("Create a view","formidable-views"),id:"frm_select_data_source_create",onclickPreventDefault:onCreateViewFormSubmit.bind(this,type)});return div({children:[pageCounter,backButton,createButton],position:"relative"})}function onCreateViewFormSubmit(type){let formId;
formId=getFormIdFromUrl();if(!formId)formId=getFormIdValueFromDatasourceSelect();if(typeIncludesThreeSteps(type)&&""!==formId)transitionToStepThree(formId,type);else triggerCreateView(formId,type)}function transitionToStepThree(formId,type){return maybeCreateModal({id:"frm_new_view_modal",title:__("Customize view","formidable-views"),content:stepThreeContent(formId,type),footer:stepThreeFooter(formId,type)})}function stepThreeContent(formId,type){if("table"===type)return getStepThreeContentForTableType(formId);
return emptyNode()}function getStepThreeContentForTableType(formId){const placeholder=div();post({action:"frm_views_get_table_column_options",form:formId,nonce:frmGlobal.nonce},function(data){placeholder.appendChild(getTableOptionHtmlFromData(data.options))});return div({padding:"20px",children:[getTableSelectAllAndSearchOptions(),div({margin:"0 0 15px",text:__("Select columns that should be displayed in view","formidable-views")}),placeholder]})}function stepThreeFooter(formId,type){const backButton=
button({text:__("Back","formidable-views"),id:"frm_select_data_source_back",class:"frm-button-secondary",onclickPreventDefault:function(){triggerStepTwo(type)}});const pageCounter=span({class:"frm-modal-pagecounter",child:document.createTextNode(getCurrentStepDescription(3,type))});const createButton=button({text:__("Create a view","formidable-views"),id:"frm_select_data_source_create",onclickPreventDefault:function(){triggerCreateView(formId,type)}});return div({children:[pageCounter,backButton,
createButton],position:"relative"})}function viewTypeListItem(type,icon,backgroundColor,title,description){const li=tag("li",{class:"frm-selectable",tabindex:"0",role:"button"}),wrapper=div({class:"frm-featured-form",children:[div({class:"frm-category-icon",icon:icon,backgroundColor:backgroundColor,role:"button"}),div({children:[createScreenReaderBreak(),tag("h3",{text:title,class:"view-type-title",role:"button"}),createScreenReaderBreak(),div({text:description,class:"view-type-description",role:"button"})]})]});
li.appendChild(wrapper);li.setAttribute("frm-view-type",type);return li}function createScreenReaderBreak(){return div({height:0,overflow:"hidden",children:[span({text:". . ."})]})}function handleSelectableMouseOver(){const icons=this.querySelector(".frm-hover-icons");if(null!==icons)icons.style.display="inline-block";else{const clone=document.getElementById("frm-hover-icons-template").cloneNode(true);clone.id="";this.appendChild(clone)}}function handleSelectableMouseOut(){const icons=this.querySelector(".frm-hover-icons");
if(null!==icons)icons.style.display="none"}function handleTableOptionSelect(){jQuery(this).closest(".frm-new-table-view-option").toggleClass("frm-selected-table-view-option",this.checked)}function maybeTriggerNewViewModalOnLoad(){if(!getUrlParam("triggerNewViewModal"))return;onNewViewClick()}function maybeMoveSubtitle(){const subtitle=document.querySelector(".wrap > span.subtitle");if(!subtitle)return;const target=document.querySelector("#frm_top_bar > .frm_top_left");if(target)target.appendChild(subtitle)}
if("undefined"!==typeof frmViewsDom){tag=frmViewsDom.tag;div=frmViewsDom.div;span=frmViewsDom.span;a=frmViewsDom.a;input=frmViewsDom.input;emptyNode=frmViewsDom.emptyNode;button=frmViewsDom.button;select=frmViewsDom.select;option=frmViewsDom.option;pullOptionsFrom=frmViewsDom.pullOptionsFrom}if("undefined"!==typeof frmViewsModal)maybeCreateModal=frmViewsModal.maybeCreateModal;if("undefined"!==typeof frmViewsUtil){post=frmViewsUtil.post;each=frmViewsUtil.each;map=frmViewsUtil.map}if("undefined"!==
typeof frmViewsTable){getTableSelectAllAndSearchOptions=frmViewsTable.getTableSelectAllAndSearchOptions;getTableOptionHtmlFromData=frmViewsTable.getTableOptionHtmlFromData}addFrmWrapClass();maybeTriggerNewViewModalOnLoad();maybeMoveSubtitle();onClickPreventDefault("frm_new_view",onNewViewClick);jQuery(document).on("change",'.frm-new-table-view-option input[type="checkbox"]',handleTableOptionSelect);jQuery(document).on("mouseover",".frm-modal .frm-selectable",handleSelectableMouseOver);jQuery(document).on("mouseout",
".frm-modal .frm-selectable",handleSelectableMouseOut);document.addEventListener("click",event=>{const target=event.target;if("LI"===target.nodeName&&target.classList.contains("frm-selectable")&&target.closest("#frm_new_view_modal")){triggerClickOnNewViewTypeLi(target);return}})})();
